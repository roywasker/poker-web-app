"use strict";(self.webpackChunkpoker_web_app=self.webpackChunkpoker_web_app||[]).push([[720],{5254:(e,t,a)=>{a.d(t,{Cf:()=>m,Dq:()=>l,Hy:()=>p,nL:()=>f,pc:()=>c,x1:()=>h});var r=a(7064),n=a(3611);const o=(0,r.Wp)({apiKey:"AIzaSyB_C62gqBeFuCIEkMrUr3tdEWTCIZX7RyA",authDomain:"poker-967ea.firebaseapp.com",projectId:"poker-967ea",storageBucket:"poker-967ea.firebasestorage.app",messagingSenderId:"349597163789",appId:"1:349597163789:android:c2f23b99100e2176b81044"}),i=(0,n.C3)(o),s=(0,n.KR)(i,"PlayersList"),c=async e=>{const t=(0,n.VC)(s),a=t.key;return await(0,n.hZ)(t,{id:a,name:e,balance:0}),a},l=async()=>{const e=await(0,n.Jt)(s),t=[];return e.exists()&&e.forEach((e=>{const a=e.val();a.id=e.key,t.push(a)})),t},d=(0,n.KR)(i,"dateList"),p=async()=>{const e=await(0,n.Jt)(d),t=[];return e.exists()&&e.forEach((e=>{const a=e.child("date").val();a&&t.push({date:a,key:e.key})})),t.sort(((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()))},u=((0,n.KR)(i,"Games"),(0,n.KR)(i,"dateList")),m=async e=>{try{const t=(0,n.VC)(u),a=t.key;if(!a)throw new Error("Failed to generate date ID");const r={date:e.date};await(0,n.hZ)(t,r);const o=(0,n.KR)(i,`dateList/${a}/playerBalance`);for(const i of e.players){const e=(0,n.VC)(o);if(!e.key)throw new Error("Failed to generate player ID");const t={name:i.playerName,balance:i.profit};await(0,n.hZ)(e,t)}return a}catch(t){throw console.error("Error adding game:",t),t}},h=((0,n.KR)(i,"Transfers"),async e=>{if(!e)throw new Error("Please select a date");const t=(0,n.KR)(i,`dateList/${e}/playerBalance`),a=await(0,n.Jt)(t),r=[];return a.exists()&&a.forEach((e=>{const t=e.child("name").val(),a=e.child("balance").val(),n=e.key;t&&void 0!==a&&r.push({id:n,name:t,balance:a})})),r.sort(((e,t)=>t.balance-e.balance))}),f=async e=>{try{const t=await l(),a=new Map;e.players.forEach((e=>{a.set(e.playerName,e)}));const r=t.map((e=>{const t=a.get(e.name);if(t){const a=e.balance+t.profit;return(async(e,t)=>{console.log("Updating player balance for playerId:",e,"to newBalance:",t);const a=(0,n.KR)(i,`PlayersList/${e}`);await(0,n.yo)(a,{balance:t})})(e.id,a)}return Promise.resolve()}));await Promise.all(r)}catch(t){throw console.error("Error updating player balances after game:",t),t}}},5720:(e,t,a)=>{a.r(t),a.d(t,{default:()=>se});var r=a(5043),n=a(1675),o=a(7353),i=a(2314),s=a(5263),c=a(7392),l=a(4496),d=a(9252),p=a(1596),u=a(9336),m=a(1637),h=a(3193),f=a(9190),g=a(2099),b=a(8387),y=a(8610),x=a(1546),v=a(1475),w=a(4535),A=a(6262),k=a(8206),$=a(1347),j=a(408),S=a(5013),C=a(5849),M=a(5658),N=a(2532);const W=(0,N.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);var I=a(5671),B=a(2372);function R(e){return(0,B.Ay)("MuiMenuItem",e)}const E=(0,N.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var O=a(579);const G=(0,w.Ay)(j.A,{shouldForwardProp:e=>(0,v.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((0,A.A)((e=>{let{theme:t}=e;return{...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${E.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,x.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${E.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,x.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${E.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,x.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,x.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${E.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${E.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${M.A.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${M.A.inset}`]:{marginLeft:52},[`& .${I.A.root}`]:{marginTop:0,marginBottom:0},[`& .${I.A.inset}`]:{paddingLeft:36},[`& .${W.root}`]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,[`& .${W.root} svg`]:{fontSize:"1.25rem"}}}]}}))),L=r.forwardRef((function(e,t){const a=(0,k.b)({props:e,name:"MuiMenuItem"}),{autoFocus:n=!1,component:o="li",dense:i=!1,divider:s=!1,disableGutters:c=!1,focusVisibleClassName:l,role:d="menuitem",tabIndex:p,className:u,...m}=a,h=r.useContext($.A),f=r.useMemo((()=>({dense:i||h.dense||!1,disableGutters:c})),[h.dense,i,c]),g=r.useRef(null);(0,S.A)((()=>{n&&g.current&&g.current.focus()}),[n]);const x={...a,dense:f.dense,divider:s,disableGutters:c},v=(e=>{const{disabled:t,dense:a,divider:r,disableGutters:n,selected:o,classes:i}=e,s={root:["root",a&&"dense",t&&"disabled",!n&&"gutters",r&&"divider",o&&"selected"]},c=(0,y.A)(s,R,i);return{...i,...c}})(a),w=(0,C.A)(g,t);let A;return a.disabled||(A=void 0!==p?p:-1),(0,O.jsx)($.A.Provider,{value:f,children:(0,O.jsx)(G,{ref:w,role:d,tabIndex:A,component:o,focusVisibleClassName:(0,b.A)(v.focusVisible,l),className:(0,b.A)(v.root,u),...m,ownerState:x,classes:v})})}));var z=a(2444),D=a(8698),T=a(6240);const V=r.createContext();function H(e){return(0,B.Ay)("MuiGrid",e)}const K=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],P=(0,N.A)("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>`spacing-xs-${e}`)),...["column-reverse","column","row-reverse","row"].map((e=>`direction-xs-${e}`)),...["nowrap","wrap-reverse","wrap"].map((e=>`wrap-xs-${e}`)),...K.map((e=>`grid-xs-${e}`)),...K.map((e=>`grid-sm-${e}`)),...K.map((e=>`grid-md-${e}`)),...K.map((e=>`grid-lg-${e}`)),...K.map((e=>`grid-xl-${e}`))]);function F(e){let{breakpoints:t,values:a}=e,r="";Object.keys(a).forEach((e=>{""===r&&0!==a[e]&&(r=e)}));const n=Object.keys(t).sort(((e,a)=>t[e]-t[a]));return n.slice(0,n.indexOf(r))}const X=(0,w.Ay)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e,{container:r,direction:n,item:o,spacing:i,wrap:s,zeroMinWidth:c,breakpoints:l}=a;let d=[];r&&(d=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[a[`spacing-xs-${String(e)}`]];const r=[];return t.forEach((t=>{const n=e[t];Number(n)>0&&r.push(a[`spacing-${t}-${String(n)}`])})),r}(i,l,t));const p=[];return l.forEach((e=>{const r=a[e];r&&p.push(t[`grid-${e}-${String(r)}`])})),[t.root,r&&t.container,o&&t.item,c&&t.zeroMinWidth,...d,"row"!==n&&t[`direction-xs-${String(n)}`],"wrap"!==s&&t[`wrap-xs-${String(s)}`],...p]}})((e=>{let{ownerState:t}=e;return{boxSizing:"border-box",...t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},...t.item&&{margin:0},...t.zeroMinWidth&&{minWidth:0},..."wrap"!==t.wrap&&{flexWrap:t.wrap}}}),(function(e){let{theme:t,ownerState:a}=e;const r=(0,z.kW)({values:a.direction,breakpoints:t.breakpoints.values});return(0,z.NI)({theme:t},r,(e=>{const t={flexDirection:e};return e.startsWith("column")&&(t[`& > .${P.item}`]={maxWidth:"none"}),t}))}),(function(e){let{theme:t,ownerState:a}=e;const{container:r,rowSpacing:n}=a;let o={};if(r&&0!==n){const e=(0,z.kW)({values:n,breakpoints:t.breakpoints.values});let a;"object"===typeof e&&(a=F({breakpoints:t.breakpoints.values,values:e})),o=(0,z.NI)({theme:t},e,((e,r)=>{const n=t.spacing(e);return"0px"!==n?{marginTop:`calc(-1 * ${n})`,[`& > .${P.item}`]:{paddingTop:n}}:a?.includes(r)?{}:{marginTop:0,[`& > .${P.item}`]:{paddingTop:0}}}))}return o}),(function(e){let{theme:t,ownerState:a}=e;const{container:r,columnSpacing:n}=a;let o={};if(r&&0!==n){const e=(0,z.kW)({values:n,breakpoints:t.breakpoints.values});let a;"object"===typeof e&&(a=F({breakpoints:t.breakpoints.values,values:e})),o=(0,z.NI)({theme:t},e,((e,r)=>{const n=t.spacing(e);if("0px"!==n){return{width:`calc(100% + ${n})`,marginLeft:`calc(-1 * ${n})`,[`& > .${P.item}`]:{paddingLeft:n}}}return a?.includes(r)?{}:{width:"100%",marginLeft:0,[`& > .${P.item}`]:{paddingLeft:0}}}))}return o}),(function(e){let t,{theme:a,ownerState:r}=e;return a.breakpoints.keys.reduce(((e,n)=>{let o={};if(r[n]&&(t=r[n]),!t)return e;if(!0===t)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const i=(0,z.kW)({values:r.columns,breakpoints:a.breakpoints.values}),s="object"===typeof i?i[n]:i;if(void 0===s||null===s)return e;const c=Math.round(t/s*1e8)/1e6+"%";let l={};if(r.container&&r.item&&0!==r.columnSpacing){const e=a.spacing(r.columnSpacing);if("0px"!==e){const t=`calc(${c} + ${e})`;l={flexBasis:t,maxWidth:t}}}o={flexBasis:c,flexGrow:0,maxWidth:c,...l}}return 0===a.breakpoints.values[n]?Object.assign(e,o):e[a.breakpoints.up(n)]=o,e}),{})}));const Z=e=>{const{classes:t,container:a,direction:r,item:n,spacing:o,wrap:i,zeroMinWidth:s,breakpoints:c}=e;let l=[];a&&(l=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[`spacing-xs-${String(e)}`];const a=[];return t.forEach((t=>{const r=e[t];if(Number(r)>0){const e=`spacing-${t}-${String(r)}`;a.push(e)}})),a}(o,c));const d=[];c.forEach((t=>{const a=e[t];a&&d.push(`grid-${t}-${String(a)}`)}));const p={root:["root",a&&"container",n&&"item",s&&"zeroMinWidth",...l,"row"!==r&&`direction-xs-${String(r)}`,"wrap"!==i&&`wrap-xs-${String(i)}`,...d]};return(0,y.A)(p,H,t)},_=r.forwardRef((function(e,t){const a=(0,k.b)({props:e,name:"MuiGrid"}),{breakpoints:n}=(0,T.A)(),o=(0,D.A)(a),{className:i,columns:s,columnSpacing:c,component:l="div",container:d=!1,direction:p="row",item:u=!1,rowSpacing:m,spacing:h=0,wrap:f="wrap",zeroMinWidth:g=!1,...y}=o,x=m||h,v=c||h,w=r.useContext(V),A=d?s||12:w,$={},j={...y};n.keys.forEach((e=>{null!=y[e]&&($[e]=y[e],delete j[e])}));const S={...o,columns:A,container:d,direction:p,item:u,rowSpacing:x,columnSpacing:v,wrap:f,zeroMinWidth:g,spacing:h,...$,breakpoints:n.keys},C=Z(S);return(0,O.jsx)(V.Provider,{value:A,children:(0,O.jsx)(X,{ownerState:S,className:(0,b.A)(C.root,i),as:l,ref:t,...j})})}));const J=_;function U(e){return(0,B.Ay)("MuiCard",e)}(0,N.A)("MuiCard",["root"]);const q=(0,w.Ay)(p.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})({overflow:"hidden"}),Q=r.forwardRef((function(e,t){const a=(0,k.b)({props:e,name:"MuiCard"}),{className:r,raised:n=!1,...o}=a,i={...a,raised:n},s=(e=>{const{classes:t}=e;return(0,y.A)({root:["root"]},U,t)})(i);return(0,O.jsx)(q,{className:(0,b.A)(s.root,r),elevation:n?8:void 0,ref:t,ownerState:i,...o})}));function Y(e){return(0,B.Ay)("MuiCardContent",e)}(0,N.A)("MuiCardContent",["root"]);const ee=(0,w.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:16,"&:last-child":{paddingBottom:24}}),te=r.forwardRef((function(e,t){const a=(0,k.b)({props:e,name:"MuiCardContent"}),{className:r,component:n="div",...o}=a,i={...a,component:n},s=(e=>{const{classes:t}=e;return(0,y.A)({root:["root"]},Y,t)})(i);return(0,O.jsx)(ee,{as:n,className:(0,b.A)(s.root,r),ownerState:i,ref:t,...o})}));var ae=a(3845),re=a(7332);const ne=(0,a(9662).A)((0,O.jsx)("path",{d:"M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2zm-9-2h10V8H12zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"AccountBalanceWallet");var oe=a(5977),ie=a(5254);const se=()=>{const e=(0,n.Zp)(),[t,a]=(0,r.useState)(null),[b,y]=(0,r.useState)([]),[x,v]=(0,r.useState)([]),[w,A]=(0,r.useState)(!0),[k,$]=(0,r.useState)(!1);(0,r.useEffect)((()=>{j()}),[]);const j=async()=>{A(!0);try{const e=await(0,ie.Hy)();y(e),e.length>0&&a(e[0])}catch(e){console.error("Error loading dates:",e)}finally{A(!1)}};(0,r.useEffect)((()=>{t&&S()}),[t]);const S=async()=>{if(t){$(!0);try{const e=await(0,ie.x1)(t.key);v(e)}catch(e){console.error("Error loading player balances:",e)}finally{$(!1)}}},C=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return(0,O.jsxs)(o.A,{sx:{flexGrow:1},children:[(0,O.jsx)(i.A,{position:"static",sx:{bgcolor:"lightgray"},children:(0,O.jsxs)(s.A,{children:[(0,O.jsx)(c.A,{edge:"start",color:"inherit","aria-label":"back",onClick:()=>e(oe.A.HOME),sx:{mr:2},children:(0,O.jsx)(re.A,{})}),(0,O.jsx)(l.A,{variant:"h6",component:"div",sx:{flexGrow:1},children:"History By Day"})]})}),(0,O.jsxs)(d.A,{maxWidth:"md",sx:{mt:4},children:[(0,O.jsxs)(p.A,{elevation:3,sx:{p:3,mb:4},children:[(0,O.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Select Date"}),(0,O.jsx)(u.A,{sx:{mb:2}}),w?(0,O.jsx)(o.A,{sx:{display:"flex",justifyContent:"center",p:2},children:(0,O.jsx)(m.A,{size:24})}):(0,O.jsxs)(h.A,{fullWidth:!0,variant:"outlined",children:[(0,O.jsx)(f.A,{id:"date-select-label",children:"Date"}),(0,O.jsx)(g.A,{labelId:"date-select-label",id:"date-select",value:(null===t||void 0===t?void 0:t.key)||"",onChange:e=>{const t=e.target.value,r=b.find((e=>e.key===t))||null;a(r)},label:"Date",disabled:0===b.length,children:0===b.length?(0,O.jsx)(L,{value:"",children:"No dates available"}):b.map((e=>(0,O.jsx)(L,{value:e.key,children:C(e.date)},e.key)))})]})]}),t&&(0,O.jsx)(o.A,{sx:{width:"100%"},children:k?(0,O.jsx)(o.A,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,O.jsx)(m.A,{})}):0===x.length?(0,O.jsx)(p.A,{elevation:3,sx:{p:3},children:(0,O.jsx)(l.A,{variant:"body1",align:"center",children:"No player balance data found for this date"})}):(0,O.jsxs)(p.A,{elevation:3,sx:{p:3},children:[(0,O.jsxs)(l.A,{variant:"h6",gutterBottom:!0,children:["Player Balances on ",t?C(t.date):""]}),(0,O.jsx)(u.A,{sx:{mb:2}}),(0,O.jsx)(J,{container:!0,spacing:2,children:x.map((e=>(0,O.jsx)(J,{item:!0,xs:12,sm:6,md:4,children:(0,O.jsx)(Q,{variant:"outlined",children:(0,O.jsxs)(te,{children:[(0,O.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:e.name}),(0,O.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,O.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Balance:"}),(0,O.jsx)(ae.A,{icon:(0,O.jsx)(ne,{}),label:e.balance,color:e.balance>0?"success":e.balance<0?"error":"default",variant:"outlined"})]})]})})},e.id)))})]})})]})]})}}}]);
//# sourceMappingURL=720.1d93c846.chunk.js.map