"use strict";(self.webpackChunkpoker_web_app=self.webpackChunkpoker_web_app||[]).push([[743],{1347:(e,a,t)=>{t.d(a,{A:()=>r});const r=t(5043).createContext({})},3700:(e,a,t)=>{t.d(a,{A:()=>r});const r=function(e){return"string"===typeof e}},5254:(e,a,t)=>{t.d(a,{Cf:()=>y,Dq:()=>d,Hy:()=>p,nL:()=>m,pc:()=>c,x1:()=>h});var r=t(7064),n=t(3611);const s=(0,r.Wp)({apiKey:"AIzaSyB_C62gqBeFuCIEkMrUr3tdEWTCIZX7RyA",authDomain:"poker-967ea.firebaseapp.com",projectId:"poker-967ea",storageBucket:"poker-967ea.firebasestorage.app",messagingSenderId:"349597163789",appId:"1:349597163789:android:c2f23b99100e2176b81044"}),o=(0,n.C3)(s),i=(0,n.KR)(o,"PlayersList"),c=async e=>{const a=(0,n.VC)(i),t=a.key;return await(0,n.hZ)(a,{id:t,name:e,balance:0}),t},d=async()=>{const e=await(0,n.Jt)(i),a=[];return e.exists()&&e.forEach((e=>{const t=e.val();t.id=e.key,a.push(t)})),a},l=(0,n.KR)(o,"dateList"),p=async()=>{const e=await(0,n.Jt)(l),a=[];return e.exists()&&e.forEach((e=>{const t=e.child("date").val();t&&a.push({date:t,key:e.key})})),a.sort(((e,a)=>new Date(a.date).getTime()-new Date(e.date).getTime()))},u=((0,n.KR)(o,"Games"),(0,n.KR)(o,"dateList")),y=async e=>{try{const a=(0,n.VC)(u),t=a.key;if(!t)throw new Error("Failed to generate date ID");const r={date:e.date};await(0,n.hZ)(a,r);const s=(0,n.KR)(o,`dateList/${t}/playerBalance`);for(const o of e.players){const e=(0,n.VC)(s);if(!e.key)throw new Error("Failed to generate player ID");const a={name:o.playerName,balance:o.profit};await(0,n.hZ)(e,a)}return t}catch(a){throw console.error("Error adding game:",a),a}},h=((0,n.KR)(o,"Transfers"),async e=>{if(!e)throw new Error("Please select a date");const a=(0,n.KR)(o,`dateList/${e}/playerBalance`),t=await(0,n.Jt)(a),r=[];return t.exists()&&t.forEach((e=>{const a=e.child("name").val(),t=e.child("balance").val(),n=e.key;a&&void 0!==t&&r.push({id:n,name:a,balance:t})})),r.sort(((e,a)=>a.balance-e.balance))}),m=async e=>{try{const a=await d(),t=new Map;e.players.forEach((e=>{t.set(e.playerName,e)}));const r=a.map((e=>{const a=t.get(e.name);if(a){const t=e.balance+a.profit;return(async(e,a)=>{console.log("Updating player balance for playerId:",e,"to newBalance:",a);const t=(0,n.KR)(o,`PlayersList/${e}`);await(0,n.yo)(t,{balance:a})})(e.id,t)}return Promise.resolve()}));await Promise.all(r)}catch(a){throw console.error("Error updating player balances after game:",a),a}}},5388:(e,a,t)=>{t.r(a),t.d(a,{default:()=>L});var r=t(5043),n=t(1675),s=t(7353),o=t(2314),i=t(5263),c=t(7392),d=t(4496),l=t(9252),p=t(1596),u=t(9336),y=t(1637),h=t(5721),m=t(1322),x=t(8734),b=t(3845),f=t(7332),g=t(9662),A=t(579);const w=(0,g.A)((0,A.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),j=(0,g.A)((0,A.jsx)("path",{d:"m16 18 2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6z"}),"TrendingDown");var v=t(5977),k=t(5254);const L=()=>{const e=(0,n.Zp)(),[a,t]=(0,r.useState)([]),[g,L]=(0,r.useState)(!1);(0,r.useEffect)((()=>{E()}),[]);const E=async()=>{L(!0);try{const e=await(0,k.Dq)();e.sort(((e,a)=>a.balance-e.balance)),t(e)}catch(e){console.error("Error loading players:",e)}finally{L(!1)}};return(0,A.jsxs)(s.A,{sx:{flexGrow:1},children:[(0,A.jsx)(o.A,{position:"static",sx:{bgcolor:"lightgray"},children:(0,A.jsxs)(i.A,{children:[(0,A.jsx)(c.A,{edge:"start",color:"inherit","aria-label":"back",onClick:()=>e(v.A.HOME),sx:{mr:2},children:(0,A.jsx)(f.A,{})}),(0,A.jsx)(d.A,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Player Balance"})]})}),(0,A.jsx)(l.A,{maxWidth:"sm",sx:{mt:4},children:(0,A.jsxs)(p.A,{elevation:3,sx:{p:3},children:[(0,A.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:"Players Balance"}),(0,A.jsx)(u.A,{sx:{mb:2}}),g?(0,A.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,A.jsx)(y.A,{})}):(0,A.jsx)(h.A,{children:0===a.length?(0,A.jsx)(m.Ay,{children:(0,A.jsx)(x.A,{primary:"No players found"})}):a.map((e=>(0,A.jsx)(m.Ay,{secondaryAction:(0,A.jsx)(b.A,{icon:e.balance>=0?(0,A.jsx)(w,{}):(0,A.jsx)(j,{}),label:`${e.balance} \u20aa`,color:e.balance>=0?"success":"error",variant:"outlined"}),children:(0,A.jsx)(x.A,{primary:e.name})},e.id)))})]})})]})}},5671:(e,a,t)=>{t.d(a,{A:()=>o,b:()=>s});var r=t(2532),n=t(2372);function s(e){return(0,n.Ay)("MuiListItemText",e)}const o=(0,r.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"])},5721:(e,a,t)=>{t.d(a,{A:()=>h});var r=t(5043),n=t(8387),s=t(8610),o=t(4535),i=t(8206),c=t(1347),d=t(2532),l=t(2372);function p(e){return(0,l.Ay)("MuiList",e)}(0,d.A)("MuiList",["root","padding","dense","subheader"]);var u=t(579);const y=(0,o.Ay)("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:t}=e;return[a.root,!t.disablePadding&&a.padding,t.dense&&a.dense,t.subheader&&a.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:e=>{let{ownerState:a}=e;return!a.disablePadding},style:{paddingTop:8,paddingBottom:8}},{props:e=>{let{ownerState:a}=e;return a.subheader},style:{paddingTop:0}}]}),h=r.forwardRef((function(e,a){const t=(0,i.b)({props:e,name:"MuiList"}),{children:o,className:d,component:l="ul",dense:h=!1,disablePadding:m=!1,subheader:x,...b}=t,f=r.useMemo((()=>({dense:h})),[h]),g={...t,component:l,dense:h,disablePadding:m},A=(e=>{const{classes:a,disablePadding:t,dense:r,subheader:n}=e,o={root:["root",!t&&"padding",r&&"dense",n&&"subheader"]};return(0,s.A)(o,p,a)})(g);return(0,u.jsx)(c.A.Provider,{value:f,children:(0,u.jsxs)(y,{as:l,className:(0,n.A)(A.root,d),ref:a,ownerState:g,...b,children:[x,o]})})}))},7328:(e,a,t)=>{t.d(a,{A:()=>n});var r=t(5043);const n=function(e,a){return r.isValidElement(e)&&-1!==a.indexOf(e.type.muiName??e.type?._payload?.value?.muiName)}}}]);
//# sourceMappingURL=743.329cf543.chunk.js.map