"use strict";(self.webpackChunkpoker_web_app=self.webpackChunkpoker_web_app||[]).push([[241],{2241:(e,r,a)=>{a.r(r),a.d(r,{default:()=>X});var t=a(5043),o=a(1675),s=a(7353),n=a(2314),l=a(5263),i=a(7392),d=a(4496),c=a(9252),p=a(1596),u=a(8387),m=a(8610),y=a(5844),h=a(4535),f=a(8206),x=a(5761),A=a(1833),b=a(9859),w=a(9190),v=a(3193),g=a(4827),j=a(5213),F=a(6262),P=a(6803),k=a(2532),R=a(2372);function T(e){return(0,R.Ay)("MuiFormHelperText",e)}const C=(0,k.A)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var S,E=a(579);const I=(0,h.Ay)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:a}=e;return[r.root,a.size&&r[`size${(0,P.A)(a.size)}`],a.contained&&r.contained,a.filled&&r.filled]}})((0,F.A)((e=>{let{theme:r}=e;return{color:(r.vars||r).palette.text.secondary,...r.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${C.disabled}`]:{color:(r.vars||r).palette.text.disabled},[`&.${C.error}`]:{color:(r.vars||r).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:e=>{let{ownerState:r}=e;return r.contained},style:{marginLeft:14,marginRight:14}}]}}))),L=t.forwardRef((function(e,r){const a=(0,f.b)({props:e,name:"MuiFormHelperText"}),{children:t,className:o,component:s="p",disabled:n,error:l,filled:i,focused:d,margin:c,required:p,variant:y,...h}=a,x=(0,j.A)(),A=(0,g.A)({props:a,muiFormControl:x,states:["variant","size","disabled","error","filled","focused","required"]}),b={...a,component:s,contained:"filled"===A.variant||"outlined"===A.variant,variant:A.variant,size:A.size,disabled:A.disabled,error:A.error,filled:A.filled,focused:A.focused,required:A.required};delete b.ownerState;const w=(e=>{const{classes:r,contained:a,size:t,disabled:o,error:s,filled:n,focused:l,required:i}=e,d={root:["root",o&&"disabled",s&&"error",t&&`size${(0,P.A)(t)}`,a&&"contained",l&&"focused",n&&"filled",i&&"required"]};return(0,m.A)(d,T,r)})(b);return(0,E.jsx)(I,{as:s,className:(0,u.A)(w.root,o),ref:r,...h,ownerState:b,children:" "===t?S||(S=(0,E.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):t})}));var q=a(2099);function z(e){return(0,R.Ay)("MuiTextField",e)}(0,k.A)("MuiTextField",["root"]);var B=a(4162);const M={standard:x.A,filled:A.A,outlined:b.A},N=(0,h.Ay)(v.A,{name:"MuiTextField",slot:"Root",overridesResolver:(e,r)=>r.root})({}),H=t.forwardRef((function(e,r){const a=(0,f.b)({props:e,name:"MuiTextField"}),{autoComplete:t,autoFocus:o=!1,children:s,className:n,color:l="primary",defaultValue:i,disabled:d=!1,error:c=!1,FormHelperTextProps:p,fullWidth:h=!1,helperText:x,id:A,InputLabelProps:b,inputProps:v,InputProps:g,inputRef:j,label:F,maxRows:P,minRows:k,multiline:R=!1,name:T,onBlur:C,onChange:S,onFocus:I,placeholder:H,required:$=!1,rows:K,select:D=!1,SelectProps:W,slots:V={},slotProps:Z={},type:_,value:G,variant:J="outlined",...U}=a,O={...a,autoFocus:o,color:l,disabled:d,error:c,fullWidth:h,multiline:R,required:$,select:D,variant:J},X=(e=>{const{classes:r}=e;return(0,m.A)({root:["root"]},z,r)})(O);const Q=(0,y.A)(A),Y=x&&Q?`${Q}-helper-text`:void 0,ee=F&&Q?`${Q}-label`:void 0,re=M[J],ae={slots:V,slotProps:{input:g,inputLabel:b,htmlInput:v,formHelperText:p,select:W,...Z}},te={},oe=ae.slotProps.inputLabel;"outlined"===J&&(oe&&"undefined"!==typeof oe.shrink&&(te.notched=oe.shrink),te.label=F),D&&(W&&W.native||(te.id=void 0),te["aria-describedby"]=void 0);const[se,ne]=(0,B.A)("input",{elementType:re,externalForwardedProps:ae,additionalProps:te,ownerState:O}),[le,ie]=(0,B.A)("inputLabel",{elementType:w.A,externalForwardedProps:ae,ownerState:O}),[de,ce]=(0,B.A)("htmlInput",{elementType:"input",externalForwardedProps:ae,ownerState:O}),[pe,ue]=(0,B.A)("formHelperText",{elementType:L,externalForwardedProps:ae,ownerState:O}),[me,ye]=(0,B.A)("select",{elementType:q.A,externalForwardedProps:ae,ownerState:O}),he=(0,E.jsx)(se,{"aria-describedby":Y,autoComplete:t,autoFocus:o,defaultValue:i,fullWidth:h,multiline:R,name:T,rows:K,maxRows:P,minRows:k,type:_,value:G,id:Q,inputRef:j,onBlur:C,onChange:S,onFocus:I,placeholder:H,inputProps:ce,slots:{input:V.htmlInput?de:void 0},...ne});return(0,E.jsxs)(N,{className:(0,u.A)(X.root,n),disabled:d,error:c,fullWidth:h,ref:r,required:$,color:l,variant:J,ownerState:O,...U,children:[null!=F&&""!==F&&(0,E.jsx)(le,{htmlFor:Q,id:ee,...ie,children:F}),D?(0,E.jsx)(me,{"aria-describedby":Y,id:Q,labelId:ee,value:G,input:he,...ye,children:s}):he,x&&(0,E.jsx)(pe,{id:Y,...ue,children:x})]})}));var $=a(1906),K=a(1637),D=a(9336),W=a(5721),V=a(1322),Z=a(8734),_=a(794),G=a(4194),J=a(7332),U=a(5977),O=a(5254);const X=()=>{const e=(0,o.Zp)(),[r,a]=(0,t.useState)(""),[u,m]=(0,t.useState)([]),[y,h]=(0,t.useState)(!1),[f,x]=(0,t.useState)(!1),[A,b]=(0,t.useState)(""),[w,v]=(0,t.useState)("success");(0,t.useEffect)((()=>{g()}),[]);const g=async()=>{h(!0);try{const e=await(0,O.Dq)();m(e)}catch(e){console.error("Error loading players:",e),j("Failed to load players","error")}finally{h(!1)}},j=(e,r)=>{b(e),v(r),x(!0)},F=()=>{x(!1)};return(0,E.jsxs)(s.A,{sx:{flexGrow:1},children:[(0,E.jsx)(n.A,{position:"static",sx:{bgcolor:"lightgray"},children:(0,E.jsxs)(l.A,{children:[(0,E.jsx)(i.A,{edge:"start",color:"inherit","aria-label":"back",onClick:()=>e(U.A.HOME),sx:{mr:2},children:(0,E.jsx)(J.A,{})}),(0,E.jsx)(d.A,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Add New Player"})]})}),(0,E.jsxs)(c.A,{maxWidth:"sm",sx:{mt:4},children:[(0,E.jsxs)(p.A,{elevation:3,sx:{p:3,mb:4},children:[(0,E.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:"Add a New Player"}),(0,E.jsxs)(s.A,{sx:{display:"flex",mb:2},children:[(0,E.jsx)(H,{fullWidth:!0,label:"Player Name",variant:"outlined",value:r,onChange:e=>a(e.target.value),sx:{mr:2}}),(0,E.jsx)($.A,{variant:"contained",color:"primary",onClick:async()=>{if(r.trim()){h(!0);try{await(0,O.pc)(r),a(""),j("Player added successfully","success"),g()}catch(e){console.error("Error adding player:",e),j("Failed to add player","error")}finally{h(!1)}}else j("Please enter a player name","error")},disabled:y,children:y?(0,E.jsx)(K.A,{size:24}):"Add"})]})]}),(0,E.jsxs)(p.A,{elevation:3,sx:{p:3},children:[(0,E.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:"Players List"}),(0,E.jsx)(D.A,{sx:{mb:2}}),y?(0,E.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,E.jsx)(K.A,{})}):(0,E.jsx)(W.A,{children:0===u.length?(0,E.jsx)(V.Ay,{children:(0,E.jsx)(Z.A,{primary:"No players added yet"})},"empty-list-item"):u.map((e=>(0,E.jsx)(V.Ay,{children:(0,E.jsx)(Z.A,{primary:e.name,secondary:`Balance: ${e.balance}`})},e.id)))})]})]}),(0,E.jsx)(_.A,{open:f,autoHideDuration:6e3,onClose:F,children:(0,E.jsx)(G.A,{onClose:F,severity:w,sx:{width:"100%"},children:A})})]})}},5254:(e,r,a)=>{a.d(r,{Cf:()=>m,Dq:()=>d,Hy:()=>p,nL:()=>h,pc:()=>i,x1:()=>y});var t=a(7064),o=a(3611);const s=(0,t.Wp)({apiKey:"AIzaSyB_C62gqBeFuCIEkMrUr3tdEWTCIZX7RyA",authDomain:"poker-967ea.firebaseapp.com",projectId:"poker-967ea",storageBucket:"poker-967ea.firebasestorage.app",messagingSenderId:"349597163789",appId:"1:349597163789:android:c2f23b99100e2176b81044"}),n=(0,o.C3)(s),l=(0,o.KR)(n,"PlayersList"),i=async e=>{const r=(0,o.VC)(l),a=r.key;return await(0,o.hZ)(r,{id:a,name:e,balance:0}),a},d=async()=>{const e=await(0,o.Jt)(l),r=[];return e.exists()&&e.forEach((e=>{const a=e.val();a.id=e.key,r.push(a)})),r},c=(0,o.KR)(n,"dateList"),p=async()=>{const e=await(0,o.Jt)(c),r=[];return e.exists()&&e.forEach((e=>{const a=e.child("date").val();a&&r.push({date:a,key:e.key})})),r.sort(((e,r)=>new Date(r.date).getTime()-new Date(e.date).getTime()))},u=((0,o.KR)(n,"Games"),(0,o.KR)(n,"dateList")),m=async e=>{try{const r=(0,o.VC)(u),a=r.key;if(!a)throw new Error("Failed to generate date ID");const t={date:e.date};await(0,o.hZ)(r,t);const s=(0,o.KR)(n,`dateList/${a}/playerBalance`);for(const n of e.players){const e=(0,o.VC)(s);if(!e.key)throw new Error("Failed to generate player ID");const r={name:n.playerName,balance:n.profit};await(0,o.hZ)(e,r)}return a}catch(r){throw console.error("Error adding game:",r),r}},y=((0,o.KR)(n,"Transfers"),async e=>{if(!e)throw new Error("Please select a date");const r=(0,o.KR)(n,`dateList/${e}/playerBalance`),a=await(0,o.Jt)(r),t=[];return a.exists()&&a.forEach((e=>{const r=e.child("name").val(),a=e.child("balance").val(),o=e.key;r&&void 0!==a&&t.push({id:o,name:r,balance:a})})),t.sort(((e,r)=>r.balance-e.balance))}),h=async e=>{try{const r=await d(),a=new Map;e.players.forEach((e=>{a.set(e.playerName,e)}));const t=r.map((e=>{const r=a.get(e.name);if(r){const a=e.balance+r.profit;return(async(e,r)=>{console.log("Updating player balance for playerId:",e,"to newBalance:",r);const a=(0,o.KR)(n,`PlayersList/${e}`);await(0,o.yo)(a,{balance:r})})(e.id,a)}return Promise.resolve()}));await Promise.all(t)}catch(r){throw console.error("Error updating player balances after game:",r),r}}}}]);
//# sourceMappingURL=241.7acd52c7.chunk.js.map