"use strict";(self.webpackChunkpoker_web_app=self.webpackChunkpoker_web_app||[]).push([[416],{1416:(e,r,t)=>{t.r(r),t.d(r,{default:()=>ae});var a=t(5043),o=t(1675),s=t(7353),n=t(2314),i=t(5263),l=t(7392),p=t(4496),c=t(9252),d=t(1906),u=t(1637),x=t(794),m=t(4194),h=t(8387),y=t(8610),f=t(5844),g=t(6803),b=t(1551),A=t(6258),v=t(1596),w=t(2532),S=t(2372);function j(e){return(0,S.Ay)("MuiDialog",e)}const k=(0,w.A)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);const C=a.createContext({});var W=t(2220),M=t(4535),N=t(6240),I=t(6262),D=t(8206),P=t(4162),R=t(579);const O=(0,M.Ay)(W.A,{name:"MuiDialog",slot:"Backdrop",overrides:(e,r)=>r.backdrop})({zIndex:-1}),T=(0,M.Ay)(b.A,{name:"MuiDialog",slot:"Root",overridesResolver:(e,r)=>r.root})({"@media print":{position:"absolute !important"}}),z=(0,M.Ay)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.container,r[`scroll${(0,g.A)(t.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),B=(0,M.Ay)(v.A,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.paper,r[`scrollPaper${(0,g.A)(t.scroll)}`],r[`paperWidth${(0,g.A)(String(t.maxWidth))}`],t.fullWidth&&r.paperFullWidth,t.fullScreen&&r.paperFullScreen]}})((0,I.A)((e=>{let{theme:r}=e;return{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:e=>{let{ownerState:r}=e;return!r.maxWidth},style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:"px"===r.breakpoints.unit?Math.max(r.breakpoints.values.xs,444):`max(${r.breakpoints.values.xs}${r.breakpoints.unit}, 444px)`,[`&.${k.paperScrollBody}`]:{[r.breakpoints.down(Math.max(r.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(r.breakpoints.values).filter((e=>"xs"!==e)).map((e=>({props:{maxWidth:e},style:{maxWidth:`${r.breakpoints.values[e]}${r.breakpoints.unit}`,[`&.${k.paperScrollBody}`]:{[r.breakpoints.down(r.breakpoints.values[e]+64)]:{maxWidth:"calc(100% - 64px)"}}}}))),{props:e=>{let{ownerState:r}=e;return r.fullWidth},style:{width:"calc(100% - 64px)"}},{props:e=>{let{ownerState:r}=e;return r.fullScreen},style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${k.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}}))),F=a.forwardRef((function(e,r){const t=(0,D.b)({props:e,name:"MuiDialog"}),o=(0,N.A)(),s={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{"aria-describedby":n,"aria-labelledby":i,"aria-modal":l=!0,BackdropComponent:p,BackdropProps:c,children:d,className:u,disableEscapeKeyDown:x=!1,fullScreen:m=!1,fullWidth:b=!1,maxWidth:w="sm",onBackdropClick:S,onClick:k,onClose:W,open:M,PaperComponent:I=v.A,PaperProps:F={},scroll:E="paper",slots:$={},slotProps:K={},TransitionComponent:L=A.A,transitionDuration:H=s,TransitionProps:G,...q}=t,U={...t,disableEscapeKeyDown:x,fullScreen:m,fullWidth:b,maxWidth:w,scroll:E},V=(e=>{const{classes:r,scroll:t,maxWidth:a,fullWidth:o,fullScreen:s}=e,n={root:["root"],container:["container",`scroll${(0,g.A)(t)}`],paper:["paper",`paperScroll${(0,g.A)(t)}`,`paperWidth${(0,g.A)(String(a))}`,o&&"paperFullWidth",s&&"paperFullScreen"]};return(0,y.A)(n,j,r)})(U),Z=a.useRef(),_=(0,f.A)(i),X=a.useMemo((()=>({titleId:_})),[_]),Y={slots:{transition:L,...$},slotProps:{transition:G,paper:F,backdrop:c,...K}},[J,Q]=(0,P.A)("root",{elementType:T,shouldForwardComponentProp:!0,externalForwardedProps:Y,ownerState:U,className:(0,h.A)(V.root,u),ref:r}),[ee,re]=(0,P.A)("backdrop",{elementType:O,shouldForwardComponentProp:!0,externalForwardedProps:Y,ownerState:U}),[te,ae]=(0,P.A)("paper",{elementType:B,shouldForwardComponentProp:!0,externalForwardedProps:Y,ownerState:U,className:(0,h.A)(V.paper,F.className)}),[oe,se]=(0,P.A)("container",{elementType:z,externalForwardedProps:Y,ownerState:U,className:(0,h.A)(V.container)}),[ne,ie]=(0,P.A)("transition",{elementType:A.A,externalForwardedProps:Y,ownerState:U,additionalProps:{appear:!0,in:M,timeout:H,role:"presentation"}});return(0,R.jsx)(J,{closeAfterTransition:!0,slots:{backdrop:ee},slotProps:{backdrop:{transitionDuration:H,as:p,...re}},disableEscapeKeyDown:x,onClose:W,open:M,onClick:e=>{k&&k(e),Z.current&&(Z.current=null,S&&S(e),W&&W(e,"backdropClick"))},...Q,...q,children:(0,R.jsx)(ne,{...ie,children:(0,R.jsx)(oe,{onMouseDown:e=>{Z.current=e.target===e.currentTarget},...se,children:(0,R.jsx)(te,{as:I,elevation:24,role:"dialog","aria-describedby":n,"aria-labelledby":_,"aria-modal":l,...ae,children:(0,R.jsx)(C.Provider,{value:X,children:d})})})})})}));function E(e){return(0,S.Ay)("MuiDialogTitle",e)}const $=(0,w.A)("MuiDialogTitle",["root"]),K=(0,M.Ay)(p.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,r)=>r.root})({padding:"16px 24px",flex:"0 0 auto"}),L=a.forwardRef((function(e,r){const t=(0,D.b)({props:e,name:"MuiDialogTitle"}),{className:o,id:s,...n}=t,i=t,l=(e=>{const{classes:r}=e;return(0,y.A)({root:["root"]},E,r)})(i),{titleId:p=s}=a.useContext(C);return(0,R.jsx)(K,{component:"h2",className:(0,h.A)(l.root,o),ownerState:i,ref:r,variant:"h6",id:s??p,...n})}));function H(e){return(0,S.Ay)("MuiDialogContent",e)}(0,w.A)("MuiDialogContent",["root","dividers"]);const G=(0,M.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,t.dividers&&r.dividers]}})((0,I.A)((e=>{let{theme:r}=e;return{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:e=>{let{ownerState:r}=e;return r.dividers},style:{padding:"16px 24px",borderTop:`1px solid ${(r.vars||r).palette.divider}`,borderBottom:`1px solid ${(r.vars||r).palette.divider}`}},{props:e=>{let{ownerState:r}=e;return!r.dividers},style:{[`.${$.root} + &`]:{paddingTop:0}}}]}}))),q=a.forwardRef((function(e,r){const t=(0,D.b)({props:e,name:"MuiDialogContent"}),{className:a,dividers:o=!1,...s}=t,n={...t,dividers:o},i=(e=>{const{classes:r,dividers:t}=e,a={root:["root",t&&"dividers"]};return(0,y.A)(a,H,r)})(n);return(0,R.jsx)(G,{className:(0,h.A)(i.root,a),ownerState:n,ref:r,...s})}));var U=t(9336);function V(e){return(0,S.Ay)("MuiDialogActions",e)}(0,w.A)("MuiDialogActions",["root","spacing"]);const Z=(0,M.Ay)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,!t.disableSpacing&&r.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:e=>{let{ownerState:r}=e;return!r.disableSpacing},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),_=a.forwardRef((function(e,r){const t=(0,D.b)({props:e,name:"MuiDialogActions"}),{className:a,disableSpacing:o=!1,...s}=t,n={...t,disableSpacing:o},i=(e=>{const{classes:r,disableSpacing:t}=e,a={root:["root",!t&&"spacing"]};return(0,y.A)(a,V,r)})(n);return(0,R.jsx)(Z,{className:(0,h.A)(i.root,a),ownerState:n,ref:r,...s})}));var X=t(7332),Y=t(9662);const J=(0,Y.A)((0,R.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),Q=(0,Y.A)((0,R.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");var ee=t(5977),re=t(5254);const te=(0,a.memo)((e=>{let{row:r,players:t,onPlayerSelect:a,onUpdateBuyIn:o,onUpdateCashOut:n,getProfit:i}=e;return(0,R.jsxs)(s.A,{sx:{display:"grid",gridTemplateColumns:"40% 30% 30%",gap:{xs:"5px",sm:"10px"},mb:{xs:"5px",sm:"10px"}},children:[(0,R.jsx)(s.A,{children:(0,R.jsxs)("select",{value:r.playerName,onChange:e=>a(r.id,e),style:{width:"100%",padding:"8px",borderRadius:"28px",border:"1px solid #e0e0e0",fontSize:"14px"},children:[(0,R.jsx)("option",{value:"",children:"Select player"}),t.map((e=>(0,R.jsx)("option",{value:e.name,children:e.name},e.id)))]})}),(0,R.jsx)(s.A,{children:(0,R.jsx)("input",{type:"number",value:r.buyIn||"",onChange:e=>{void 0!==e.target.value&&o(r.id,e.target.value)},style:{width:"80%",padding:"8px",borderRadius:"28px",border:"1px solid #e0e0e0",textAlign:"center",fontSize:"14px"}})}),(0,R.jsx)(s.A,{children:(0,R.jsx)("input",{type:"number",value:r.cashOut||"",onChange:e=>{void 0!==e.target.value&&n(r.id,e.target.value)},style:{width:"80%",padding:"8px",borderRadius:"28px",border:"1px solid #e0e0e0",backgroundColor:i(r)>0?"#e8eaf6":"white",textAlign:"center",fontSize:"14px"}})})]})})),ae=()=>{const e=(0,o.Zp)(),[r,t]=(0,a.useState)([]),[h,y]=(0,a.useState)([{id:"1",playerName:"",buyIn:0,cashOut:0},{id:"2",playerName:"",buyIn:0,cashOut:0},{id:"3",playerName:"",buyIn:0,cashOut:0},{id:"4",playerName:"",buyIn:0,cashOut:0}]),[f,g]=(0,a.useState)(!1),[b,A]=(0,a.useState)(!1),[v,w]=(0,a.useState)(""),[S,j]=(0,a.useState)("success"),[k,C]=(0,a.useState)(!1),[W,M]=(0,a.useState)([]),[N,I]=(0,a.useState)([]);(0,a.useEffect)((()=>{D()}),[]),(0,a.useEffect)((()=>{console.log("Players state updated:",r)}),[r]);const D=async()=>{g(!0);try{const e=await(0,re.Dq)();console.log("Loaded players:",e),t(e)}catch(e){console.error("Error loading players:",e),z("Failed to load players","error")}finally{g(!1)}},P=(e,r)=>{const t=r.target.value;if(console.log("Selected player name:",t,"for row:",e),!t)return;const a=h.map((r=>r.id===e?{...r,playerName:t}:r));console.log("Setting new rows:",a),y(a)},O=(e,r)=>{const t=""===r?0:parseInt(r);isNaN(t)||y(h.map((r=>r.id===e?{...r,buyIn:t}:r)))},T=(e,r)=>{const t=""===r?0:parseInt(r);isNaN(t)||y(h.map((r=>r.id===e?{...r,cashOut:t}:r)))},z=(e,r)=>{w(e),j(r),A(!0)},B=()=>{A(!1)},E=e=>e.cashOut-e.buyIn;return(0,R.jsxs)(s.A,{sx:{minHeight:"100vh",bgcolor:"background.default"},children:[(0,R.jsx)(n.A,{position:"static",color:"primary",children:(0,R.jsxs)(i.A,{children:[(0,R.jsx)(l.A,{edge:"start",color:"inherit","aria-label":"back",onClick:()=>e(ee.A.HOME),children:(0,R.jsx)(X.A,{})}),(0,R.jsx)(p.A,{variant:"h6",component:"div",sx:{flexGrow:1,textAlign:"center"},children:"New Game"})]})}),(0,R.jsxs)(c.A,{maxWidth:"sm",sx:{py:{xs:2,sm:3}},children:[(0,R.jsxs)(s.A,{sx:{mb:{xs:2,sm:4}},children:[(0,R.jsxs)(s.A,{sx:{display:"grid",gridTemplateColumns:"40% 30% 30%",gap:{xs:"5px",sm:"10px"},mb:{xs:"5px",sm:"10px"},fontWeight:"bold",fontSize:{xs:"14px",sm:"16px"}},children:[(0,R.jsx)(s.A,{children:"Name"}),(0,R.jsx)(s.A,{sx:{textAlign:"center"},children:"Buy"}),(0,R.jsx)(s.A,{sx:{textAlign:"center"},children:"Return"})]}),h.map((e=>(0,R.jsx)(te,{row:e,players:r,onPlayerSelect:P,onUpdateBuyIn:O,onUpdateCashOut:T,getProfit:E},e.id)))]}),(0,R.jsxs)(s.A,{sx:{display:"flex",justifyContent:"center",mt:{xs:1,sm:2},gap:{xs:1,sm:2}},children:[(0,R.jsx)(l.A,{sx:{bgcolor:"#424242",color:"white","&:hover":{bgcolor:"#616161"},width:{xs:"40px",sm:"48px"},height:{xs:"40px",sm:"48px"}},onClick:()=>{const e=h.length>=9?(z("Maximum 9 players allowed","error"),{success:!1,message:"Maximum 9 players allowed"}):(y([...h,{id:Date.now().toString(),playerName:"",buyIn:0,cashOut:0}]),{success:!0,message:""});e.success||z(e.message,"error")},disabled:h.length>=9,children:(0,R.jsx)(J,{fontSize:"small"})}),(0,R.jsx)(l.A,{sx:{bgcolor:"#424242",color:"white","&:hover":{bgcolor:"#616161"},width:{xs:"40px",sm:"48px"},height:{xs:"40px",sm:"48px"}},onClick:()=>{if(h.length>0){const r=h[h.length-1],t=(e=r.id,h.length<=4?(z("Minimum 4 players required","error"),{success:!1,message:"Minimum 4 players required"}):(y(h.filter((r=>r.id!==e))),{success:!0,message:""}));t.success||z(t.message,"error")}var e},disabled:h.length<=4,children:(0,R.jsx)(Q,{fontSize:"small"})})]}),(0,R.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",mt:{xs:2,sm:3}},children:(0,R.jsx)(d.A,{variant:"contained",color:"primary",size:"large",onClick:()=>{if(0===h.length)return void z("Please add at least one player","error");const e=[];for(const o of h){if(!o.playerName)return void z("All rows must have a player selected","error");const t=r.find((e=>e.name===o.playerName)),a={playerId:t?t.id:"",playerName:o.playerName,buyIn:o.buyIn,cashOut:o.cashOut,profit:o.cashOut-o.buyIn};e.push(a)}const t=e.reduce(((e,r)=>e+r.profit),0);if(Math.abs(t)>.01)return void z("Game is not balanced. Total profit/loss should be zero.","error");const a=e.map((e=>({...e})));M(e),I((e=>{const r=[],t=e.filter((e=>e.profit<0)).sort(((e,r)=>e.profit-r.profit)),a=e.filter((e=>e.profit>0)).sort(((e,r)=>r.profit-e.profit));let o=0,s=0;for(;o<t.length&&s<a.length;){const e=t[o],n=a[s],i=Math.min(Math.abs(e.profit),n.profit);i>0&&r.push({from:e.playerName,to:n.playerName,amount:i}),e.profit+=i,n.profit-=i,Math.abs(e.profit)<.01&&o++,Math.abs(n.profit)<.01&&s++}return r})(a)),C(!0)},disabled:f,sx:{bgcolor:"#424242",color:"white",borderRadius:"4px",textTransform:"none",py:{xs:1,sm:1.5},width:"100%",maxWidth:{xs:"180px",sm:"200px"},fontSize:{xs:"14px",sm:"16px"},"&:hover":{bgcolor:"#616161"}},children:f?(0,R.jsx)(u.A,{size:20}):"Finish Game"})})]}),(0,R.jsx)(x.A,{open:b,autoHideDuration:6e3,onClose:B,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{bottom:{xs:16,sm:24}},children:(0,R.jsx)(m.A,{onClose:B,severity:S,sx:{width:"100%"},children:v})}),(0,R.jsxs)(F,{open:k,onClose:()=>C(!1),maxWidth:"sm",fullWidth:!0,sx:{"& .MuiDialog-paper":{width:{xs:"95%",sm:"80%"},maxWidth:{xs:"95%",sm:"500px"},m:{xs:1,sm:2}}},children:[(0,R.jsx)(L,{sx:{fontSize:{xs:"18px",sm:"20px"}},children:"Game Results"}),(0,R.jsx)(q,{children:(0,R.jsxs)(s.A,{sx:{mt:2},children:[(0,R.jsx)(p.A,{variant:"h6",gutterBottom:!0,sx:{fontSize:{xs:"16px",sm:"18px"}},children:"Final Balances:"}),W.map((e=>(0,R.jsxs)(p.A,{color:e.profit>0?"success.main":e.profit<0?"error.main":"text.primary",sx:{mb:1,fontWeight:500,fontSize:{xs:"14px",sm:"16px"}},children:[e.playerName,": ",e.profit>0?"+":"",e.profit,"(",e.buyIn," \u2192 ",e.cashOut,")"]},e.playerName))),(0,R.jsx)(U.A,{sx:{my:3}}),(0,R.jsx)(p.A,{variant:"h6",gutterBottom:!0,sx:{fontSize:{xs:"16px",sm:"18px"}},children:"Required Transfers:"}),N.map(((e,r)=>(0,R.jsxs)(p.A,{sx:{mb:1,fontWeight:500,fontSize:{xs:"14px",sm:"16px"}},children:[e.from," \u2192 ",e.to,": \u20aa",e.amount]},r)))]})}),(0,R.jsxs)(_,{children:[(0,R.jsx)(d.A,{onClick:()=>C(!1),color:"secondary",children:"Cancel"}),(0,R.jsx)(d.A,{onClick:async()=>{g(!0);try{const e=h.map((e=>({playerName:e.playerName,buyIn:e.buyIn,cashOut:e.cashOut,profit:e.cashOut-e.buyIn}))),r=new Date,t={date:r.toISOString().split("T")[0],players:e};await(0,re.Cf)(t),await(0,re.nL)(t),z("Game finished successfully","success"),C(!1),y([{id:"1",playerName:"",buyIn:0,cashOut:0},{id:"2",playerName:"",buyIn:0,cashOut:0},{id:"3",playerName:"",buyIn:0,cashOut:0},{id:"4",playerName:"",buyIn:0,cashOut:0}])}catch(e){console.error("Error finishing game:",e),z("Failed to finish game","error")}finally{g(!1)}},color:"primary",disabled:f,children:f?(0,R.jsx)(u.A,{size:20}):"Confirm"})]})]})]})}},5254:(e,r,t)=>{t.d(r,{Cf:()=>x,Dq:()=>p,Hy:()=>d,nL:()=>h,pc:()=>l,x1:()=>m});var a=t(7064),o=t(3611);const s=(0,a.Wp)({apiKey:"AIzaSyB_C62gqBeFuCIEkMrUr3tdEWTCIZX7RyA",authDomain:"poker-967ea.firebaseapp.com",projectId:"poker-967ea",storageBucket:"poker-967ea.firebasestorage.app",messagingSenderId:"349597163789",appId:"1:349597163789:android:c2f23b99100e2176b81044"}),n=(0,o.C3)(s),i=(0,o.KR)(n,"PlayersList"),l=async e=>{const r=(0,o.VC)(i),t=r.key;return await(0,o.hZ)(r,{id:t,name:e,balance:0}),t},p=async()=>{const e=await(0,o.Jt)(i),r=[];return e.exists()&&e.forEach((e=>{const t=e.val();t.id=e.key,r.push(t)})),r},c=(0,o.KR)(n,"dateList"),d=async()=>{const e=await(0,o.Jt)(c),r=[];return e.exists()&&e.forEach((e=>{const t=e.child("date").val();t&&r.push({date:t,key:e.key})})),r.sort(((e,r)=>new Date(r.date).getTime()-new Date(e.date).getTime()))},u=((0,o.KR)(n,"Games"),(0,o.KR)(n,"dateList")),x=async e=>{try{const r=(0,o.VC)(u),t=r.key;if(!t)throw new Error("Failed to generate date ID");const a={date:e.date};await(0,o.hZ)(r,a);const s=(0,o.KR)(n,`dateList/${t}/playerBalance`);for(const n of e.players){const e=(0,o.VC)(s);if(!e.key)throw new Error("Failed to generate player ID");const r={name:n.playerName,balance:n.profit};await(0,o.hZ)(e,r)}return t}catch(r){throw console.error("Error adding game:",r),r}},m=((0,o.KR)(n,"Transfers"),async e=>{if(!e)throw new Error("Please select a date");const r=(0,o.KR)(n,`dateList/${e}/playerBalance`),t=await(0,o.Jt)(r),a=[];return t.exists()&&t.forEach((e=>{const r=e.child("name").val(),t=e.child("balance").val(),o=e.key;r&&void 0!==t&&a.push({id:o,name:r,balance:t})})),a.sort(((e,r)=>r.balance-e.balance))}),h=async e=>{try{const r=await p(),t=new Map;e.players.forEach((e=>{t.set(e.playerName,e)}));const a=r.map((e=>{const r=t.get(e.name);if(r){const t=e.balance+r.profit;return(async(e,r)=>{console.log("Updating player balance for playerId:",e,"to newBalance:",r);const t=(0,o.KR)(n,`PlayersList/${e}`);await(0,o.yo)(t,{balance:r})})(e.id,t)}return Promise.resolve()}));await Promise.all(a)}catch(r){throw console.error("Error updating player balances after game:",r),r}}}}]);
//# sourceMappingURL=416.f72dff71.chunk.js.map